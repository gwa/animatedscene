define([],function(){return function(a,b,c,d){function e(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}function f(a,b,c,d){return c*(a/=d)*a*a+b}function g(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}function h(a,b,c,d){return c*a/d+b}function i(){x=[],t=null,u=0}function j(a,b,c,d){var e=!1,f=!1;"undefined"==typeof x[a]&&(x[a]=[]),"in"===d?(e=!0,f=!1):"out"===d?(e=!1,f=!0):"inout"===d&&(e=!0,f=!0),x[a].push({frame:b,value:c,easein:e,easeout:f})}function k(a){var b;o(),t=[];for(var c in x){t[c]=[];var d=l(c,0),e=m(c,0);if(d||e)if(e)for(b=0;a>=b;b++)t[c][b]=d?e?n(b,d,e):d.value:e.value,e&&b===e.frame&&(d=e,e=m(c,b));else for(b=0;a>=b;b++)t[c][b]=d.value}u=a}function l(a,b){var c,d;for(c in x[a]){if(!(x[a][c].frame<=b))return d;d=x[a][c]}return d}function m(a,b){for(var c in x[a])if(x[a][c].frame>b)return x[a][c];return null}function n(a,b,c){var d;if(d=b.easeout&&c.easein?e:b.easeout?f:c.easein?g:h,"object"==typeof b.value){var i=[];for(var j in b.value)i[j]=d(a-b.frame,b.value[j],c.value[j]-b.value[j],c.frame-b.frame);return i}return d(a-b.frame,b.value,c.value-b.value,c.frame-b.frame)}function o(){for(var a in x)p(x[a])}function p(a){var b=function(a,b){return a.frame<b.frame?-1:a.frame>b.frame?1:0};a.sort(b)}function q(a){a>u&&(a=u);var b;for(var c in t)switch(b=t[c][a],c){case"scale":v.width(y*b).height(z*b);break;default:v[w](c,b)}}function r(){var a,b=[];for(a in t)b.push(a);return b}function s(a,b){return t[a][b]}var t,u,v=a,w="undefined"!=typeof b?b:"css",x=[],y="undefined"!=typeof c?c:a.width(),z="undefined"!=typeof d?d:a.height();return{clear:i,addKeyFrame:j,calculateFrames:k,gotoFrame:q,getAnimatedProperties:r,getFrameDataForProperty:s}}});